(globalThis["webpackChunk_openeo_web_editor"]=globalThis["webpackChunk_openeo_web_editor"]||[]).push([[1458,4477,4741,4783,4900,6307,6980,7430,8080,9403],{66684:function(t,e,s){
/*!
 * @kirtandesai/ol-geocoder - v5.0.3
 * A geocoder extension compatible with OpenLayers v7.
 * https://github.com/kirtan-desai/ol-geocoder
 * Built: Thu Nov 17 2022 14:58:35 GMT-0500 (Eastern Standard Time)
 */
!function(e,n){t.exports=n(s(10972),s(29276),s(49700),s(82986),s(54602),s(44294),s(86717),s(89718))}(0,(function(t,e,s,n,a,i,r,o){"use strict";function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=l(t),u=l(e),p=l(s),d=l(n),h=l(a),m=l(i),f=l(r),g=l(o),y="gcd-container",x="gcd-button-control",b="gcd-input-query",v="gcd-input-reset",w={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",reset:"gcd-gl-reset",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",input:"gcd-txt-input",reset:"gcd-txt-reset",icon:"gcd-txt-glass",result:"gcd-txt-result"}},_={containerId:y,buttonControlId:x,inputQueryId:b,inputResetId:v,cssClasses:w};const C=Object.freeze({__proto__:null,containerId:y,buttonControlId:x,inputQueryId:b,inputResetId:v,cssClasses:w,default:_}),A="addresschosen",S="nominatim",E="reverse",k="glass-button",T="text-input",j="osm",P="mapquest",$="photon",O="bing",F="opencage",D={provider:j,placeholder:"Search for an address",featureStyle:null,targetType:k,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,autoComplete:!1,autoCompleteMinLength:2,autoCompleteTimeout:200,debug:!1};function L(t,e="Assertion failed"){if(!t){if("undefined"!=typeof Error)throw new Error(e);throw e}}function N(t){const e=function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){let t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=()=>Date.now()-t}return window.performance.now()}().toString(36);return t?t+e:e}function I(t){return/^\d+$/u.test(t)}function B(t,e,s){if(Array.isArray(t))return void t.forEach((t=>B(t,e)));const n=Array.isArray(e)?e:e.split(/\s+/u);let a=n.length;for(;a--;)q(t,n[a])||U(t,n[a],s)}function M(t,e,s){if(Array.isArray(t))return void t.forEach((t=>M(t,e,s)));const n=Array.isArray(e)?e:e.split(/\s+/u);let a=n.length;for(;a--;)q(t,n[a])&&H(t,n[a],s)}function q(t,e){return t.classList?t.classList.contains(e):V(e).test(t.className)}function R(t,e){return t.replace(/\{\s*([\w-]+)\s*\}/gu,((t,s)=>{const n=void 0===e[s]?"":e[s];return String(n).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}))}function G(t,e){let s;if(Array.isArray(t)){if(s=document.createElement(t[0]),t[1].id&&(s.id=t[1].id),t[1].classname&&(s.className=t[1].classname),t[1].attr){const{attr:e}=t[1];if(Array.isArray(e)){let t=-1;for(;++t<e.length;)s.setAttribute(e[t].name,e[t].value)}else s.setAttribute(e.name,e.value)}}else s=document.createElement(t);s.innerHTML=e;const n=document.createDocumentFragment();for(;s.childNodes[0];)n.append(s.childNodes[0]);return s.append(n),s}function V(t){return new RegExp(`(^|\\s+) ${t} (\\s+|$)`,"u")}function U(t,e,s){t.classList?t.classList.add(e):t.className=`${t.className} ${e}`.trim(),s&&I(s)&&window.setTimeout((()=>H(t,e)),s)}function H(t,e,s){t.classList?t.classList.remove(e):t.className=t.className.replace(V(e)," ").trim(),s&&I(s)&&window.setTimeout((()=>U(t,e)),s)}const W=C.cssClasses;class z{constructor(t){this.options=t,this.els=this.createControl()}createControl(){let t,e,s;return this.options.targetType===T?(e=`${W.namespace} ${W.inputText.container}`,t=G(["div",{id:C.containerId,classname:e}],z.input),s={container:t,control:t.querySelector(`.${W.inputText.control}`),input:t.querySelector(`.${W.inputText.input}`),reset:t.querySelector(`.${W.inputText.reset}`),result:t.querySelector(`.${W.inputText.result}`)}):(e=`${W.namespace} ${W.glass.container}`,t=G(["div",{id:C.containerId,classname:e}],z.glass),s={container:t,control:t.querySelector(`.${W.glass.control}`),button:t.querySelector(`.${W.glass.button}`),input:t.querySelector(`.${W.glass.input}`),reset:t.querySelector(`.${W.glass.reset}`),result:t.querySelector(`.${W.glass.result}`)}),s.input.placeholder=this.options.placeholder,s}}z.glass=`\n  <div class="${W.glass.control} ${W.olControl}">\n    <button type="button" id="${C.buttonControlId}" class="${W.glass.button}"></button>\n    <input type="text" id="${C.inputQueryId}" class="${W.glass.input}" autocomplete="off" placeholder="Search ...">\n    <a id="${C.inputResetId}" class="${W.glass.reset} ${W.hidden}"></a>\n  </div>\n  <ul class="${W.glass.result}"></ul>\n`,z.input=`\n  <div class="${W.inputText.control}">\n    <input type="text" id="${C.inputQueryId}" class="${W.inputText.input}" autocomplete="off" placeholder="Search ...">\n    <span class="${W.inputText.icon}"></span>\n    <button type="button" id="${C.inputResetId}" class="${W.inputText.reset} ${W.hidden}"></button>\n  </div>\n  <ul class="${W.inputText.result}"></ul>\n`;class Y{constructor(){this.settings={url:"https://photon.komoot.io/api/",params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}}getParameters(t){return t.lang=t.lang.toLowerCase(),{url:this.settings.url,params:{q:t.query,limit:t.limit||this.settings.params.limit,lang:this.settings.langs.includes(t.lang)?t.lang:this.settings.params.lang}}}handleResponse(t){return 0===t.features.length?[]:t.features.map((t=>({lon:t.geometry.coordinates[0],lat:t.geometry.coordinates[1],address:{name:t.properties.name,postcode:t.properties.postcode,city:t.properties.city,state:t.properties.state,country:t.properties.country},original:{formatted:t.properties.name,details:t.properties}})))}}class K{constructor(){this.settings={url:"https://nominatim.openstreetmap.org/search/",params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return 0===t.length?[]:t.map((t=>({lon:t.lon,lat:t.lat,bbox:t.boundingbox,address:{name:t.display_name,road:t.address.road||"",houseNumber:t.address.house_number||"",postcode:t.address.postcode,city:t.address.city||t.address.town,state:t.address.state,country:t.address.country},original:{formatted:t.display_name,details:t.address}})))}}class Q{constructor(){this.settings={url:"https://open.mapquestapi.com/nominatim/v1/search.php",params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,format:"json",addressdetails:1,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return 0===t.length?[]:t.map((t=>({lon:t.lon,lat:t.lat,address:{name:t.address.neighbourhood||"",road:t.address.road||"",postcode:t.address.postcode,city:t.address.city||t.address.town,state:t.address.state,country:t.address.country},original:{formatted:t.display_name,details:t.address}})))}}class X{constructor(){this.settings={url:"https://dev.virtualearth.net/REST/v1/Locations",callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}}getParameters(t){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:t.query,key:t.key,includeNeighborhood:t.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:t.maxResults||this.settings.params.maxResults}}}handleResponse(t){const{resources:e}=t.resourceSets[0];return 0===e.length?[]:e.map((t=>({lon:t.point.coordinates[1],lat:t.point.coordinates[0],address:{name:t.name},original:{formatted:t.address.formattedAddress,details:t.address}})))}}class J{constructor(){this.settings={url:"https://api.opencagedata.com/geocode/v1/json?",params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,limit:t.limit||this.settings.params.limit,countrycode:t.countrycodes||this.settings.params.countrycodes}}}handleResponse(t){return 0===t.results.length?[]:t.results.map((t=>({lon:t.geometry.lng,lat:t.geometry.lat,address:{name:t.components.house_number||"",road:t.components.road||"",postcode:t.components.postcode,city:t.components.city||t.components.town,state:t.components.state,country:t.components.country},original:{formatted:t.formatted,details:t.components}})))}}function Z(t){return new Promise(((e,s)=>{const n=function(t,e){return e&&"object"==typeof e&&(t+=(/\?/u.test(t)?"&":"?")+tt(e)),t}(t.url,t.data),a={method:"GET",mode:"cors",credentials:"same-origin"};t.jsonp?function(t,e,s){const{head:n}=document,a=document.createElement("script"),i=`f${Math.round(Math.random()*Date.now())}`;a.setAttribute("src",`${t+(t.indexOf("?")>0?"&":"?")+e}=${i}`),window[i]=t=>{window[i]=void 0,setTimeout((()=>n.removeChild(a)),0),s(t)},n.append(a)}(n,t.callbackName,e):fetch(n,a).then((t=>t.json())).then(e).catch(s)}))}function tt(t){return Object.keys(t).reduce(((e,s)=>(e.push("object"==typeof t[s]?tt(t[s]):`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`),e)),[]).join("&")}const et=C.cssClasses;class st{constructor(t,e){this.Base=t,this.layerName=N("geocoder-layer-"),this.layer=new d.default({name:this.layerName,source:new h.default}),this.options=t.options,this.options.provider="string"==typeof this.options.provider?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=e,this.lastQuery="",this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()}setListeners(){let t,e;const s=t=>{t.stopPropagation(),q(this.els.control,et.glass.expanded)?this.collapse():this.expand()};this.els.input.addEventListener("keypress",(t=>{const e=t.target.value.trim();(t.key?"Enter"===t.key:t.which?13===t.which:t.keyCode&&13===t.keyCode)&&(t.preventDefault(),this.query(e))}),!1),this.els.input.addEventListener("click",(t=>t.stopPropagation()),!1),this.els.input.addEventListener("input",(s=>{const n=s.target.value.trim();0!==n.length?M(this.els.reset,et.hidden):B(this.els.reset,et.hidden),this.options.autoComplete&&n!==e&&(e=n,t&&clearTimeout(t),t=setTimeout((()=>{n.length>=this.options.autoCompleteMinLength&&this.query(n)}),this.options.autoCompleteTimeout))}),!1),this.els.reset.addEventListener("click",(t=>{this.els.input.focus(),this.els.input.value="",this.lastQuery="",B(this.els.reset,et.hidden),this.clearResults()}),!1),this.options.targetType===k&&this.els.button.addEventListener("click",s,!1)}query(t){this.provider||(this.provider=this.newProvider());const e=this.provider.getParameters({query:t,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,limit:this.options.limit});if(this.lastQuery===t&&this.els.result.firstChild)return;this.lastQuery=t,this.clearResults(),B(this.els.reset,et.spin);const s={url:e.url,data:e.params};e.callbackName&&(s.jsonp=!0,s.callbackName=e.callbackName),Z(s).then((t=>{this.options.debug&&console.info(t),M(this.els.reset,et.spin);const e=this.provider.handleResponse(t);e&&(this.createList(e),this.listenMapClick())})).catch((t=>{M(this.els.reset,et.spin);const e=G("li","<h5>Error! No internet connection?</h5>");this.els.result.append(e)}))}createList(t){const e=this.els.result;t.forEach((t=>{let s;s=this.options.provider===j?`<span class="${et.road}">${t.address.name}</span>`:this.addressTemplate(t.address);const n=G("li",`<a href="#">${s}</a>`);n.addEventListener("click",(e=>{e.preventDefault(),this.chosen(t,s,t.address,t.original)}),!1),e.append(n)}))}chosen(t,e,s,n){const a=this.Base.getMap(),i=[Number.parseFloat(t.lon),Number.parseFloat(t.lat)],r=a.getView().getProjection(),o=g.default.transform(i,"EPSG:4326",r);let{bbox:l}=t;l&&(l=g.default.transformExtent([l[2],l[1],l[3],l[0]],"EPSG:4326",r));const c={formatted:e,details:s,original:n};if(!1===this.options.keepOpen&&this.clearResults(!0),!0===this.options.preventDefault)this.Base.dispatchEvent({type:A,address:c,coordinate:o,bbox:l,place:t});else{l?a.getView().fit(l,{duration:500}):function(t,e,s=500,n=2.388657133911758){t.getView().animate({duration:s,resolution:n},{duration:s,center:e})}(a,o);const e=this.createFeature(o,c);this.Base.dispatchEvent({type:A,address:c,feature:e,coordinate:o,bbox:l,place:t})}}createFeature(t){const e=new f.default(new m.default(t));return this.addLayer(),e.setStyle(this.options.featureStyle),e.setId(N("geocoder-ft-")),this.getSource().addFeature(e),e}addressTemplate(t){const e=[];return t.name&&e.push(['<span class="',et.road,'">{name}</span>'].join("")),(t.road||t.building||t.house_number)&&e.push(['<span class="',et.road,'">{building} {road} {house_number}</span>'].join("")),(t.city||t.town||t.village)&&e.push(['<span class="',et.city,'">{postcode} {city} {town} {village}</span>'].join("")),(t.state||t.country)&&e.push(['<span class="',et.country,'">{state} {country}</span>'].join("")),R(e.join("<br>"),t)}newProvider(){switch(this.options.provider){case j:return new K;case P:return new Q;case $:return new Y;case O:return new X;case F:return new J;default:return this.options.provider}}expand(){M(this.els.input,et.spin),B(this.els.control,et.glass.expanded),window.setTimeout((()=>this.els.input.focus()),100),this.listenMapClick()}collapse(){this.els.input.value="",this.els.input.blur(),B(this.els.reset,et.hidden),M(this.els.control,et.glass.expanded),this.clearResults()}listenMapClick(){if(this.registeredListeners.mapClick)return;const t=this,e=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,e.addEventListener("click",{handleEvent(s){t.clearResults(!0),e.removeEventListener(s.type,this,!1),t.registeredListeners.mapClick=!1}},!1)}clearResults(t){t&&this.options.targetType===k?this.collapse():function(t){for(;t.firstChild;)t.firstChild.remove()}(this.els.result)}getSource(){return this.layer.getSource()}addLayer(){let t=!1;const e=this.Base.getMap();e.getLayers().forEach((e=>{e===this.layer&&(t=!0)})),t||e.addLayer(this.layer)}}class nt extends c.default{constructor(t=S,e={}){let s,n;L("string"==typeof t,"@param `type` should be string!"),L(t===S||t===E,`@param 'type' should be '${S}'\n      or '${E}'!`),L("object"==typeof e,"@param `options` should be object!"),D.featureStyle=[new u.default({image:new p.default({scale:.7,src:"//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png"})})];const a=new z(e);if(t===S&&(s=a.els.container),super({element:s}),!(this instanceof nt))return new nt;this.options=function(t,e){const s={};return Object.keys(t).forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])})),Object.keys(e).forEach((t=>{Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])})),s}(D,e),this.container=s,t===S&&(n=new st(this,a.els),this.layer=n.layer)}getLayer(){return this.layer}getSource(){return this.getLayer().getSource()}setProvider(t){this.options.provider=t}setProviderKey(t){this.options.key=t}}return nt}))},35254:(t,e,s)=>{"use strict";s.d(e,{A:()=>n});const n={components:{FederationNotice:()=>s.e(2604).then(s.bind(s,52604)),FederationMissingNotice:()=>s.e(5363).then(s.bind(s,35363))},props:{federation:{type:Object,default:()=>({})}}}},69748:(t,e,s)=>{"use strict";s.d(e,{A:()=>p});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vue-component collections"},[e("SearchableList",{attrs:{data:t.collections,identifierKey:"id",summaryKey:"title",keywordsKey:"keywords",showKeywords:t.showKeywords,showSummaryOnExpand:!1,externalSearchTerm:t.searchTerm,externalHideDeprecated:t.hideDeprecated,deprecatedFilter:t.deprecatedFilter,externalHideExperimental:t.hideExperimental,experimentalFilter:t.experimentalFilter,sort:t.sort,offerDetails:t.offerDetails,heading:t.heading,collapsed:t.collapsed,loadAdditionalData:t.loadAdditionalData,allowCopy:""},on:{detailsToggled:t.detailsToggled},scopedSlots:t._u([{key:"heading",fn:function(e){return[t._t("heading",null,null,e)]}},t.missing?{key:"content-start",fn:function(){return[e("FederationMissingNotice",{attrs:{missing:t.missing,federation:t.federation}})]},proxy:!0}:null,{key:"summary",fn:function(e){return[t._t("summary",null,null,e)]}},{key:"details",fn:function(s){return[e("Collection",{attrs:{data:s.item,mapOptions:t.mapOptions,federation:t.federation},scopedSlots:t._u([{key:"title",fn:function(){return[e("span",{staticClass:"hidden"})]},proxy:!0},{key:"before-description",fn:function(e){return[t._t("collection-before-description",null,null,e)]}},{key:"end",fn:function(e){return[t._t("collection-end",null,null,e)]}},{key:"spatial-extents",fn:function(e){return[t._t("collection-spatial-extents",null,null,e)]}},{key:"temporal-extents",fn:function(e){return[t._t("collection-temporal-extents",null,null,e)]}}],null,!0)})]}}],null,!0)})],1)},a=[],i=s(86975),r=s(35254);const o={name:"Collections",components:{Collection:()=>i.A.loadAsyncComponent(Promise.all([s.e(156),s.e(2919),s.e(4432),s.e(9140),s.e(2281),s.e(3249)]).then(s.bind(s,3249))),SearchableList:()=>i.A.loadAsyncComponent(s.e(4152).then(s.bind(s,34152)))},mixins:[r.A],props:{collections:{type:Array,default:()=>[]},mapOptions:{type:Object,default:()=>({})},searchTerm:{type:String,default:null},sort:{type:Boolean,default:!0},offerDetails:{type:Boolean,default:!0},heading:{type:String,default:"Collections"},collapsed:{type:Boolean,default:null},loadAdditionalData:{type:Function,default:null},showKeywords:{type:Boolean,default:!1},hideDeprecated:{type:Boolean,default:!1},deprecatedFilter:{type:Boolean,default:!1},hideExperimental:{type:Boolean,default:!1},experimentalFilter:{type:Boolean,default:!1},missing:{type:Array,default:null},...r.A.props},beforeCreate(){i.A.enableHtmlProps(this)},methods:{detailsToggled(...t){this.$emit("detailsToggled",...t)}}},l=o;var c=s(81656),u=(0,c.A)(l,n,a,!1,null,null,null);const p=u.exports},34783:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-container"},[t.loaded?[e("MultiSelect",{key:t.type,ref:"htmlElement",attrs:{label:"label","track-by":"id",multiple:t.multiple,options:t.selectOptions,allowEmpty:!1,preselectFirst:t.preselect,disabled:!t.editable,deselectLabel:t.deselectLabel,taggable:t.taggable,tagPlaceholder:t.tagPlaceholder,openDirection:t.openDirection},on:{tag:t.addValue},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t.showDetails?e("button",{attrs:{type:"button",title:"Details"},on:{click:function(e){return t.$emit("onDetails")}}},[e("i",{staticClass:"fas fa-info"})]):t._e()]:e("div",{staticClass:"loading"},[e("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" Loading options...")])],2)},a=[],i=(s(98992),s(54520),s(72577),s(81454),s(75262)),r=s.n(i),o=s(2566);const l={name:"SelectBox",components:{MultiSelect:r()},props:{value:{},type:{type:String,default:""},editable:{type:Boolean,default:!0},options:{type:[Array,Object]},schema:{type:Object},context:{},optionFilter:{type:Function,default:null},openDirection:{type:String,default:"auto"}},computed:{selectOptions(){let t=[];switch(this.type){case"band-name":let e=this.$store.state.collections.find((t=>t.id==this.context));if(o.A.isObject(e)){try{t=e.summaries["bands"].map((t=>t.name))}catch(a){}if(0===t.length&&o.A.isObject(e["cube:dimensions"]))try{let s=Object.values(e["cube:dimensions"]).find((t=>"bands"===t.type));s&&Array.isArray(s.values)&&(t=s.values)}catch(a){}}break;case"collection-id":t=this.$store.state.collections;break;case"job-id":t=this.$store.state.jobs.jobs;break;case"file-path":case"file-paths":t=this.$store.state.files.files;break;case"epsg-code":t=this.$store.state.editor.epsgCodes;break;case"input-format":t=this.$store.state.fileFormats.getInputTypes();break;case"openeo-datatype":let n=s(63610),i={};for(let t of n.NATIVE_TYPES)i[t]={type:t};t=Object.assign(i,n.API_TYPES);break;case"output-format":t=this.$store.state.fileFormats.getOutputTypes();break;case"service-type":t=this.$store.state.serviceTypes;break;case"billing-plan":t=this.$store.state.connection.capabilities().listPlans();break;case"udf-runtime":t=Object.keys(this.$store.state.udfRuntimes);break;case"udf-runtime-version":t=this.context in this.$store.state.udfRuntimes?Object.keys(this.$store.state.udfRuntimes[this.context].versions):[];break;default:t=this.options}"function"===typeof this.optionFilter&&t&&"object"===typeof t&&(t=o.A.isObject(t)?Object.fromEntries(Object.entries(t).filter((([t,e])=>this.optionFilter(e,t)))):t.filter(((t,e)=>this.optionFilter(t,e))));let e=[];switch(this.type){case"collection-id":return t.map((t=>this.e(t.id))).sort(this.sortByLabel);case"crs":for(const n of t){let t=n.replace("http://www.opengis.net/def/crs/",""),s=t.match(/^EPSG\/\d+\/(\d+)/i);if(s){let e=Number.parseInt(s[1],10);e in this.$store.state.editor.epsgCodes&&(t=this.$store.state.editor.epsgCodes[e]+` (EPSG:${e})`)}let a=t.match(/^OGC\/([^\/]+)\/(.+)/i);a&&(t=a[2]+` (${n})`),e.push({id:n,label:t})}return e;case"job-id":return t.map((t=>({id:t.id,label:o.A.getResourceTitle(t)}))).sort(this.sortByLabel);case"openeo-datatype":for(let n in t){let s=t[n];e.push({id:n,label:s.title||o.A.prettifyString(n),value:s})}return e;case"file-path":case"file-paths":return t.map((t=>this.e(t.path))).sort(((t,e)=>o.A.sortByPath(t.id,e.id)));case"epsg-code":for(let n in t)e.push({id:Number.parseInt(n,10),label:n+": "+t[n]});return e;case"input-format":case"output-format":case"service-type":for(let n in t){let s=n.toUpperCase(),a=t[n].title;a?s!==a.toUpperCase()&&(a=`${a} - ${s}`):a=s,e.push({id:s,label:a})}return e.sort(this.sortByLabel);case"billing-plan":return t.map((t=>({id:t.name,label:t.name+(t.paid?" (paid)":" (free)")})));case"year":let s=(new Date).getFullYear(),a=Array.from({length:100},((t,e)=>this.e(String(s-e))));if("string"===typeof this.value&&this.value.length>0&&-1===a.findIndex((t=>t.id===this.value))){var n=this.e(this.value);this.value>s?a.unshift(n):a.push(this.e(this.value))}return a;case"band-name":case"udf-runtime":case"udf-runtime-version":return t.map((t=>this.e(t)));default:return o.A.isObject(this.schema)&&this.schema.isEnum()?this.schema.getEnumChoices().map((t=>this.e(t))):Array.isArray(this.options)?this.options.map((t=>o.A.isObject(t)?t:this.e(t))):[]}},showDetails(){return"collection-id"===this.type},deselectLabel(){return this.multiple?"Press enter to remove":""},tagPlaceholder(){return"year"===this.type?"Press enter to select":"Press enter to create a tag"},multiple(){return"file-paths"===this.type},taggable(){let t=["band-name","collection-id","job-id","input-format","output-format"];return"year"===this.type||0===this.selectOptions.length&&t.includes(this.type)},preselect(){return this.multiple?!Array.isArray(this.selected)||0===this.selected.length:null===this.selected}},data(){return{selected:null,loaded:!1}},created(){this.loadData()},watch:{type(){this.loadData()},selected(t){let e;if(null===t)e=null;else if(this.multiple)Array.isArray(t)||(t=[t]),e=t.map((t=>t.id));else switch(this.type){case"epsg-code":var s=Number.parseInt(t.id);e=Number.isNaN(s)?null:s;break;case"openeo-datatype":e=t.value;break;case"year":e=String(t.id);break;default:e=t.id}this.$emit("input",e)},context(){switch(this.type){case"udf-runtime":case"udf-runtime-version":this.selected=null,this.preselectFirst();break;case"band-name":this.selected=null,this.loadData();break}}},methods:{...o.A.mapActions(["describeCollection"]),...o.A.mapActions("editor",["loadEpsgCodes"]),e(t){return{id:t,label:t}},async loadData(){this.loaded=!1,"epsg-code"===this.type||"crs"===this.type?await this.loadEpsgCodes():"band-name"===this.type&&await this.describeCollection(this.context),this.initSelection(),this.loaded=!0},async preselectFirst(){await this.$nextTick();let t=this.$refs.htmlElement;t.preselectFirst&&Array.isArray(t.filteredOptions)&&t.filteredOptions.length&&t.select(t.filteredOptions[0])},initSelection(){let t="undefined"===typeof this.value?this.schema.default():this.value;if(this.multiple&&Array.isArray(t))this.selected=this.selectOptions.filter((e=>t.includes(e.id)));else{switch(this.type){case"input-format":case"output-format":case"service-type":"string"===typeof t&&(t=t.toUpperCase());break}let e=this.selectOptions.find((e=>e.id===t));void 0!==e&&(this.selected=e)}},sortByLabel(t,e){return o.A.compareStringCaseInsensitive(t.label,e.label)},addValue(t){this.selected=this.e(t)}}},c=l;var u=s(81656),p=(0,u.A)(c,n,a,!1,null,null,null);const d=p.exports},31660:(t,e,s)=>{"use strict";s.d(e,{A:()=>d});s(81454);var n=s(66684),a=s.n(n);s(98992),s(54520);class i{constructor(t,e=!1){this.url=t,this.geojson=e}getParameters(t){return{url:this.url,params:{q:t.query,format:"json",limit:10,"accept-language":"en",polygon_geojson:this.geojson?1:0,polygon_threshold:.001}}}handleResponse(t){return 0===t.length?[]:t.filter((t=>["boundary","geological","leisure","natural","place","water","waterway"].includes(t.class))).map((t=>({lon:t.lon,lat:t.lat,bbox:t.boundingbox,address:{name:t.display_name},original:{formatted:t.display_name,details:t.address,geojson:t.geojson}})))}}const r={methods:{addGeocoder(t,e=!1){if(!this.$config.geocoder)return;const s={provider:new i(this.$config.geocoder,e),placeholder:"Search for ...",keepOpen:!0,preventDefault:!0},n=new(a())("nominatim",s);n.on("addresschosen",(s=>{if(e)t(s.place?.original?.geojson,s);else if(s.place.bbox){let e=s.place.bbox.map((t=>parseFloat(t))),n={west:e[2],east:e[3],north:e[1],south:e[0]};t(n,s)}else t(null,s)})),this.map.addControl(n)}}},o=r;var l,c,u=s(81656),p=(0,u.A)(o,l,c,!1,null,null,null);const d=p.exports},15486:(t,e,s)=>{"use strict";s.d(e,{A:()=>v});s(81454);var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.id}},[e("ProgressControl",{ref:"progress",attrs:{map:t.map}}),e("UserLocationControl",{attrs:{map:t.map}}),e("TextControl",{attrs:{text:t.help,map:t.map}})],1)},a=[],i=s(66451),r=s(31660),o=s(95104),l=s(2566),c=s(73926),u=s(89718),p=s(70915),d=s(29276),h=s(55193),m=s(953),f=s(13628);const g={name:"MapAreaSelect",mixins:[i.A,r.A,o.A],components:{TextControl:h.A},props:{value:{type:[Object,Array],default:()=>null},showMaxExtent:{type:[Object,Array],default:()=>null}},data(){return{interaction:null,extent:this.toExtent(this.value)}},computed:{returnAsObject(){return!Array.isArray(this.value)},projectedExtent(){return this.extent?(0,u.transformExtent)(this.extent,"EPSG:4326",this.map.getView().getProjection()):null},outerArea(){if(!this.showMaxExtent)return null;let{west:t,east:e,north:s,south:n}=this.showMaxExtent;return{type:"Polygon",coordinates:[[[-180,90],[-180,-90],[180,-90],[180,90],[-180,90]],[[t,s],[t,n],[e,n],[e,s],[t,s]]]}},bbox(){return l.A.extentToBBox(this.extent)},help(){return this.extent?"Click inside the bounding box to remove it.":"Click on the map to add a bounding box."}},methods:{update(t){t.extent?this.extent=(0,u.transformExtent)(t.extent,this.map.getView().getProjection(),"EPSG:4326"):this.extent=null,this.$emit("input",this.returnAsObject?this.bbox:this.extent)},async renderMap(){let t=!1!==l.A.isBboxInWebMercator(this.bbox);if(await this.createMap(t?"EPSG:3857":"EPSG:4326"),this.addBasemaps(),this.addGeocoder((t=>{if(!t)return;let e=this.toExtent(t);e=(0,u.transformExtent)(e,"EPSG:4326",this.map.getView().getProjection()),this.interaction.setExtent(e),this.fitMap()})),this.showMaxExtent){const t=new d["default"]({fill:new f.A({color:"#00000099"}),stroke:new m.A({width:0,color:"#00000000"})});this.addGeoJson(this.outerArea,!1,"unsupported area",t);let e=this.toExtent(this.showMaxExtent);e=(0,u.transformExtent)(e,"EPSG:4326",this.map.getView().getProjection()),this.map.getView().fit(e,this.getFitOptions(1))}let e=t=>{if(!this.editable)return!1;if("singleclick"===t.type){if(!this.extent){let e=this.map.getSize().map((t=>.2*t)),s=this.map.getView().calculateExtent(e),n=[s[2]-s[0],s[3]-s[1]],a=[t.coordinate[0]-n[0],t.coordinate[1]-n[1],t.coordinate[0]+n[0],t.coordinate[1]+n[1]];return this.interaction.setExtent(a),!1}(0,p.Rj)(this.projectedExtent,...t.coordinate)&&(this.interaction.setExtent(null),this.interaction.vertexOverlay_.getSource().clear(),this.interaction.vertexFeature_=null)}else if(this.interaction.handlingDownUpSequence||this.interaction.snapToVertex_(t.pixel,t.map))return!0;return!1};this.interaction=new c.A({extent:this.projectedExtent,condition:e,boxStyle:(0,d.createDefaultStyle)(),pixelTolerance:15}),this.editable&&this.interaction.on("extentchanged",this.update),this.map.addInteraction(this.interaction),this.fitMap()},fitMap(){if(this.projectedExtent){var t=this.getFitOptions(this.editable?10:33);this.map.getView().fit(this.projectedExtent,t)}}}},y=g;var x=s(81656),b=(0,x.A)(y,n,a,!1,null,null,null);const v=b.exports},55193:(t,e,s)=>{"use strict";s.d(e,{A:()=>u});var n=function(){var t=this,e=t._self._c;return t.texts.length>0?e("div",{staticClass:"ol-unselectable ol-control value",class:{pointer:t.texts.length>1},on:{click:t.toggle}},[t._v(t._s(t.current))]):t._e()},a=[],i=s(23634);const r={name:"TextControl",mixins:[i.A],data(){return{i:0}},computed:{texts(){return Array.isArray(this.text)?this.text:"string"===typeof this.text&&this.text.length>0?[this.text]:[]},current(){return 0===this.texts.length?"":this.texts[this.i%this.text.length]}},props:{text:{text:[String,Array],default:""}},methods:{toggle(){this.i++}}},o=r;var l=s(81656),c=(0,l.A)(o,n,a,!1,null,"52fec35a",null);const u=c.exports},47137:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>w});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wizard-tab-content"},[e("WizardTab",{attrs:{pos:0,parent:t.parent,title:"Data Source",beforeChange:t.loadCollection}},[e("ChooseCollection",{attrs:{value:t.collection,filter:t.filterCollections,ogcapi:""},on:{input:t.submitCollection}})],1),e("WizardTab",{attrs:{pos:1,parent:t.parent,title:"Location",beforeChange:()=>!t.supportsSubsetting||null!==t.spatial_extent}},[t.supportsSubsetting?e("ChooseBoundingBox",{attrs:{max:t.max_spatial_extent},model:{value:t.spatial_extent,callback:function(e){t.spatial_extent=e},expression:"spatial_extent"}}):e("p",[t._v("Bounding box selection not supported by the server. Go ahead please.")])],1),e("WizardTab",{attrs:{pos:2,parent:t.parent,title:"Temporal Coverage",beforeChange:()=>!t.supportsSubsetting||null!==t.temporal_extent}},[t.supportsSubsetting?e("ChooseTime",{model:{value:t.temporal_extent,callback:function(e){t.temporal_extent=e},expression:"temporal_extent"}}):e("p",[t._v("Date and time selection not supported by the server. Go ahead please.")])],1),e("WizardTab",{attrs:{pos:3,parent:t.parent,title:"CRS"}},[t.supportsCrs?e("ChooseCrs",{attrs:{options:t.crsList},model:{value:t.crs,callback:function(e){t.crs=e},expression:"crs"}}):e("p",[t._v("CRS selection not supported by the server. Go ahead please.")])],1),e("WizardTab",{attrs:{pos:4,parent:t.parent,title:"Scaling"}},[t.supportsScaling?e("ChooseScale",{attrs:{data:t.collectionData},model:{value:t.scale,callback:function(e){t.scale=e},expression:"scale"}}):e("p",[t._v("Scaling not supported by the server. Go ahead please.")])],1),e("WizardTab",{attrs:{pos:5,parent:t.parent,title:"File Format",beforeChange:()=>null!==t.format}},[e("ChooseFormat",{attrs:{options:t.fileFormats,scale:!1},model:{value:t.format,callback:function(e){t.format=e},expression:"format"}})],1)],1)},a=[],i=(s(98992),s(54520),s(72577),s(81454),s(34862)),r=s(94900),o=s(16307),l=s(87430),c=s(21458),u=s(62804),p=s(45699),d=s(2566),h=s(61663),m=s(85453),f=s(99017);const g="default",y={name:"DownloadCoverage",mixins:[h.A,p.A],components:{ChooseBoundingBox:i["default"],ChooseCollection:r["default"],ChooseCrs:o["default"],ChooseFormat:l["default"],ChooseScale:c["default"],ChooseTime:u["default"]},data(){return{collection:null,collectionData:{},crs:null,format:null,scale:null,spatial_extent:null,max_spatial_extent:null,temporal_extent:null}},props:{cid:{type:String,default:null}},created(){this.collection=this.cid,this.collection&&Array.isArray(this.collections)&&(this.collectionData=this.collections.find((t=>d.A.isObject(t)&&t.id===this.collection))||{})},computed:{...d.A.mapState(["collections","connection"]),...d.A.mapGetters(["processes","collectionDefaults","supportsOgc"]),supportsSubsetting(){return this.supportsOgc("http://www.opengis.net/spec/ogcapi-coverages-1/1.0/conf/subsetting")},supportsProperties(){return this.supportsOgc("http://www.opengis.net/spec/ogcapi-coverages-1/1.0/conf/fieldselection")},supportsScaling(){return this.supportsOgc("http://www.opengis.net/spec/ogcapi-coverages-1/1.0/conf/scaling")},supportsCrs(){return this.crsList.length>1&&this.supportsOgc("http://www.opengis.net/spec/ogcapi-coverages-1/1.0/conf/crs")},coverageLinks(){return Array.isArray(this.collectionData.links)?this.collectionData.links.filter((t=>d.A.isObject(t)&&"http://www.opengis.net/def/rel/ogc/1.0/coverage"===t.rel)):[]},fileFormats(){return this.coverageLinks.map((t=>t.type||g))},crsList(){return Array.isArray(this.collectionData.crs)?this.collectionData.crs:[]}},methods:{...d.A.mapActions(["describeCollection"]),async loadCollection(){if(null===this.collection)throw new Error("Please select a collection");try{return this.collectionData=await this.describeCollection(this.collection),!0}catch(t){throw console.error(t),new Error("Can't load collection metadata, please try another collection.")}},filterCollections(t){return d.A.isCoverage(t)},submitCollection(t){if(this.collection!==t||null===this.temporal_extent){let e=this.collectionDefaults(t);this.collection!==t&&e.spatial_extent&&(this.max_spatial_extent=e.spatial_extent),this.collection===t&&null!==this.temporal_extent||!e.temporal_extent||(this.temporal_extent=e.temporal_extent)}this.collection=t,this.parent.nextTab()},async finish(){let t,e=this.format===g?t=>!t.type:t=>t.type===this.format,s=this.coverageLinks.find(e);if(!s)throw new Error("Can't find link to coverage");let n=d.A.getLink(this.collectionData,"self");n&&(t=n.href);let a=new URL(s.href,t),i=[this.spatial_extent.west,this.spatial_extent.south,this.spatial_extent.east,this.spatial_extent.north];if(a.searchParams.set("bbox",i.join(",")),Array.isArray(this.temporal_extent)){let t=this.temporal_extent.map((t=>"string"!==typeof t||t.length<10?"..":10===t.length?t+"T00:00:00Z":t)).join("/");t&&"../.."!==t&&a.searchParams.set("datetime",t)}null!==this.crs&&a.searchParams.set("crs",this.crs),null!==this.scale&&a.searchParams.set("scale-factor",this.scale);const r=a.toString();console.log(r);const o=async t=>{const e=await this.connection._get(r,{},m.Client.Environment.getResponseType(),t);let s={data:e.data,type:e.headers["content-type"]||null};this.broadcast("viewSyncResult",s,`Coverage: ${this.collection}`)};await(0,f.Kt)(this,o,"Coverage request")}}},x=y;var b=s(81656),v=(0,b.A)(x,n,a,!1,null,null,null);const w=v.exports},4477:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>c});var n=function(){var t=this,e=t._self._c;return t.active?e("div",{staticClass:"wizard-tab-container"},[t._t("default",null,{active:t.active})],2):t._e()},a=[];const i={name:"WizardTab",props:{parent:{type:Object,required:!0},pos:{type:Number,required:!0},title:{type:String,default:""},beforeChange:{type:Function},afterChange:{type:Function}},data(){return{active:!1,validationError:null,checked:!1}},mounted(){this.parent.addTab(this,this.pos)},beforeDestroy(){this.parent.removeTab(this)}},r=i;var o=s(81656),l=(0,o.A)(r,n,a,!1,null,null,null);const c=l.exports},34862:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>u});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-bbox"},[e("p",[t._v("Please select the area of interest which you want to download data for. You can add or remove a bounding box by clicking into the map.")]),e("MapAreaSelect",{staticClass:"map",attrs:{show:t.showMap,value:t.value,showMaxExtent:t.max},on:{input:t.update}})],1)},a=[],i=s(15486);const r={name:"ChooseBoundingBox",components:{MapAreaSelect:i.A},props:{value:{type:Object,default:null},max:{type:Object,default:null}},data(){return{showMap:!0}},mounted(){window.setTimeout((()=>this.showMap=!0),1e3)},methods:{update(t){this.$emit("input",t)}}},o=r;var l=s(81656),c=(0,l.A)(o,n,a,!1,null,"61a75ac8",null);const u=c.exports},94900:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-collection"},[e("p",[t._v("Please select the collection which you want to download data for.")]),e("Collections",{attrs:{heading:"",collections:t.filteredCollections,offerDetails:!1},scopedSlots:t._u([{key:"summary",fn:function({item:s}){return[e("div",{class:{element:!0,selected:s.id==t.value}},[e("div",{staticClass:"summary",on:{click:function(e){return t.update(s.id)}}},[e("strong",{attrs:{title:s.id}},[t._v(t._s(s.id))]),s.title?e("small",{attrs:{title:s.title}},[t._v(t._s(s.title))]):t._e()]),e("button",{staticClass:"button",attrs:{type:"button",title:"Show collection details"},on:{click:function(e){return t.showCollectionInfo(s.id)}}},[e("i",{staticClass:"fas fa-info"})])])]}}])})],1)},a=[],i=(s(98992),s(54520),s(69748)),r=s(2566),o=s(61663);const l={name:"ChooseCollection",mixins:[o.A],components:{Collections:i.A},props:{value:{type:String,default:null},filter:{type:Function,default:t=>!t.ogcapi}},computed:{...r.A.mapState(["collections"]),filteredCollections(){return"function"===typeof this.filter?this.collections.filter(this.filter):this.collections}},methods:{update(t){this.$emit("input",t)},showCollectionInfo(t){this.broadcast("showCollection",t)}}},c=l;var u=s(81656),p=(0,u.A)(c,n,a,!1,null,null,null);const d=p.exports},16307:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>u});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-crs"},[e("p",[t._v("Please select the coordinate reference system (CRS) you want to data be reprojected to.")]),e("SelectBox",{attrs:{type:"crs",options:t.options,value:t.value},on:{input:t.setCrs}})],1)},a=[],i=s(34783);const r={name:"ChooseCrs",components:{SelectBox:i["default"]},props:{value:{type:String,default:null},options:{type:Array,default:null}},methods:{setCrs(t){this.$emit("input",t)}}},o=r;var l=s(81656),c=(0,l.A)(o,n,a,!1,null,null,null);const u=c.exports},87430:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>u});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-format"},[e("p",[t._v("Please select the file format you want to download data in.")]),e("SelectBox",t._b({attrs:{value:t.value},on:{input:t.setFormat}},"SelectBox",t.selectProps,!1)),null!==t.scale?e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.scaleBox,expression:"scaleBox"}],attrs:{type:"checkbox",id:"scale"},domProps:{checked:Array.isArray(t.scaleBox)?t._i(t.scaleBox,null)>-1:t.scaleBox},on:{change:function(e){var s=t.scaleBox,n=e.target,a=!!n.checked;if(Array.isArray(s)){var i=null,r=t._i(s,i);n.checked?r<0&&(t.scaleBox=s.concat([i])):r>-1&&(t.scaleBox=s.slice(0,r).concat(s.slice(r+1)))}else t.scaleBox=a}}}),t._v("Â  "),e("label",{attrs:{for:"scale"}},[t._v("Scale the values from [-1, 1] to [0, 255] (often required for PNG, GIF or JPEG).")])]):t._e()],1)},a=[],i=s(34783);const r={name:"ChooseFormat",components:{SelectBox:i["default"]},props:{value:{type:String,default:null},scale:{type:Boolean,default:null},gisDataType:{type:String,default:null},options:{type:Array,default:null}},computed:{selectProps(){return Array.isArray(this.options)?{type:"coverage-types",options:this.options}:{type:"output-format",optionFilter:this.filterFormats?this.filterFormats():null}},scaleBox:{get(){return this.scale},set(t){this.$emit("update:scale",t)}},filterFormats(){return this.gisDataType?t=>!Array.isArray(t.gis_data_types)||0===t.gis_data_types.length||t.gis_data_types.includes(this.gisDataType):null}},methods:{setFormat(t){this.scaleBox=["bmp","gif","jpeg","jpg","png","webp"].includes(t.toLowerCase()),this.$emit("input",t)}}},o=r;var l=s(81656),c=(0,l.A)(o,n,a,!1,null,null,null);const u=c.exports},21458:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>c});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-crs"},[e("p",[t._v("You can optionally select a scale factor for the data.")]),e("input",{attrs:{type:"number",min:1,step:.1},domProps:{value:t.value},on:{input:t.setScale}}),t._m(0)])},a=[function(){var t=this,e=t._self._c;return e("p",[e("code",[t._v("1")]),t._v(" is the original resolution."),e("br"),e("code",[t._v("2")]),t._v(" would be half of the original resolution, etc. The higher the given value, the lower the resolution."),e("br"),t._v(" Leave the field empty to use the default behavior of the server. ")])}];const i={name:"ChooseScale",props:{value:{type:Number,default:null},data:{type:Object,default:()=>({})}},methods:{setScale(t){"number"!==typeof t.target.valueAsNumber||Number.isNaN(t.target.valueAsNumber)?this.$emit("input",null):this.$emit("input",t.target.valueAsNumber)}}},r=i;var o=s(81656),l=(0,o.A)(r,n,a,!1,null,null,null);const c=l.exports},62804:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>u});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step choose-time"},[e("p",[t._v("Please select the days for which you want to download data for.")]),e("TemporalPicker",{attrs:{type:"temporal-interval",intervalType:"date",value:t.value},on:{input:e=>t.$emit("input",e)}})],1)},a=[],i=s(27349);const r={name:"ChooseTime",components:{TemporalPicker:i["default"]},props:{value:{type:Array,default:null}}},o=r;var l=s(81656),c=(0,l.A)(o,n,a,!1,null,null,null);const u=c.exports},63610:(t,e,s)=>{"use strict";s.r(e),s.d(e,{API_TYPES:()=>a,NATIVE_TYPES:()=>i});var n=s(2566);const a=n.A.resolveJsonRefs(s(96318)).definitions,i=["string","integer","number","boolean","array","object"]},45699:(t,e,s)=>{"use strict";s.d(e,{A:()=>a});var n=s(4477);const a={components:{WizardTab:n["default"]},props:{parent:{type:Object,required:!0},options:{type:Object,default:()=>({})}},created(){for(let t in this.options)this[t]=this.options[t]}}},73926:(t,e,s)=>{"use strict";s.d(e,{A:()=>A});var n=s(1685),a=s(86717),i=s(73445),r=s(44294),o=s(21409),l=s(82986),c=s(54602),u=s(58704),p=s(70915),d=s(6933),h=s(29276),m=s(34142),f=s(89718);const g={EXTENTCHANGED:"extentchanged"};class y extends n.Ay{constructor(t){super(g.EXTENTCHANGED),this.extent=t}}class x extends o.A{constructor(t){t=t||{},super(t),this.on,this.once,this.un,this.condition_=t.condition?t.condition:u.Gk,this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),this.extentOverlay_=new l["default"]({source:new c["default"]({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:b(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new l["default"]({source:new c["default"]({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:v(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)}snapToVertex_(t,e){const s=e.getCoordinateFromPixelInternal(t),n=function(t,e){return(0,d.$x)(s,t)-(0,d.$x)(s,e)},a=this.getExtentInternal();if(a){const i=C(a);i.sort(n);const r=i[0];let o=(0,d.sG)(s,r);const l=e.getPixelFromCoordinateInternal(o);if((0,d.Io)(t,l)<=this.pixelTolerance_){const t=e.getPixelFromCoordinateInternal(r[0]),s=e.getPixelFromCoordinateInternal(r[1]),n=(0,d.hG)(l,t),a=(0,d.hG)(l,s),i=Math.sqrt(Math.min(n,a));return this.snappedToVertex_=i<=this.pixelTolerance_,this.snappedToVertex_&&(o=n>a?r[1]:r[0]),o}}return null}handlePointerMove_(t){const e=t.pixel,s=t.map;let n=this.snapToVertex_(e,s);n||(n=s.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)}createOrUpdateExtentFeature_(t){let e=this.extentFeature_;return e?t?e.setGeometry((0,m.VY)(t)):e.setGeometry(void 0):(e=t?new a["default"]((0,m.VY)(t)):new a["default"]({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e}createOrUpdatePointerFeature_(t){let e=this.vertexFeature_;if(e){const s=e.getGeometry();s.setCoordinates(t)}else e=new a["default"](new r["default"](t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e);return e}handleEvent(t){return!t.originalEvent||!this.condition_(t)||(t.type!=i.A.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),super.handleEvent(t),!1)}handleDownEvent(t){const e=t.pixel,s=t.map,n=this.getExtentInternal();let a=this.snapToVertex_(e,s);const i=function(t){let e=null,s=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?s=n[3]:t[1]==n[3]&&(s=n[1]),null!==e&&null!==s?[e,s]:null};if(a&&n){const t=a[0]==n[0]||a[0]==n[2]?a[0]:null,e=a[1]==n[1]||a[1]==n[3]?a[1]:null;null!==t&&null!==e?this.pointerHandler_=w(i(a)):null!==t?this.pointerHandler_=_(i([t,n[1]]),i([t,n[3]])):null!==e&&(this.pointerHandler_=_(i([n[0],e]),i([n[2],e])))}else a=s.getCoordinateFromPixelInternal(e),this.setExtent([a[0],a[1],a[0],a[1]]),this.pointerHandler_=w(a);return!0}handleDragEvent(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}}handleUpEvent(t){this.pointerHandler_=null;const e=this.getExtentInternal();return e&&0!==(0,p.UG)(e)||this.setExtent(null),!1}setMap(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),super.setMap(t)}getExtent(){return(0,f.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new y(this.extent_))}}function b(){const t=(0,h.createEditingStyle)();return function(e,s){return t["Polygon"]}}function v(){const t=(0,h.createEditingStyle)();return function(e,s){return t["Point"]}}function w(t){return function(e){return(0,p.Tr)([t,e])}}function _(t,e){return t[0]==e[0]?function(s){return(0,p.Tr)([t,[s[0],e[1]]])}:t[1]==e[1]?function(s){return(0,p.Tr)([t,[e[0],s[1]]])}:null}function C(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}const A=x}}]);
//# sourceMappingURL=6980.3ac52565.js.map